{% extends "base.html" %}
{% block content %}
<h3>Bookings</h3>
<table class="table table-striped">
  <thead><tr>
    <th>ID</th><th>Passenger</th><th>Flight</th><th>Seat</th><th>Date</th><th>Status</th><th>Payment</th><th>Action</th>
  </tr></thead>
  <tbody>
    {% for r in rows %}
      <tr>
        <td>{{ r[0] }}</td>
        <td>{{ r[1] }}</td>
        <td>{{ r[2] }}</td>
        <td>{{ r[3] }}</td>
        <td>{{ r[4] }}</td>
        <td>{{ r[5] }}</td>
        <td>{{ r[6] or '-' }}</td>
        <td>
          {% if r[5] != 'CANCELLED' %}
          <form method="post" action="/cancel" onsubmit="return confirm('Cancel booking {{ r[0] }}?')" style="display:inline">
            <input type="hidden" name="booking_id" value="{{ r[0] }}">
            <button class="btn btn-sm btn-outline-danger">Cancel</button>
          </form>
          {% else %}
          â€”
          {% endif %}
        </td>
      </tr>
    {% else %}
      <tr><td colspan="8" class="text-center text-muted">No bookings</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
